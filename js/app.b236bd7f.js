(function(e){function t(t){for(var i,n,l=t[0],r=t[1],h=t[2],d=0,u=[];d<l.length;d++)n=l[d],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&u.push(c[n][0]),c[n]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);o&&o(t);while(u.length)u.shift()();return a.push.apply(a,h||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,l=1;l<s.length;l++){var r=s[l];0!==c[r]&&(i=!1)}i&&(a.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},c={app:0},a=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/kiryueverywhere/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var h=0;h<l.length;h++)t(l[h]);var o=r;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},3438:function(e,t,s){"use strict";s("5c26")},"5c26":function(e,t,s){},"8ed9":function(e,t,s){},cd49:function(e,t,s){"use strict";s.r(t);var i=s("7a23");const c=Object(i["d"])("h2",null,"🗺️ KIRYU EVERYWHERE! 🗺️",-1),a={key:0},n=Object(i["d"])("h3",null,"THIS HAS NOTHING TO DO WITH SEGA",-1),l=Object(i["d"])("h3",null,[Object(i["e"])("MADE BY "),Object(i["d"])("a",{href:"paul@sarda.dev"},"paul@sarda.dev")],-1),r={key:1},h=Object(i["d"])("h2",{class:"emergency_font"},[Object(i["e"])(" This is bad please email "),Object(i["d"])("a",{href:"paul@sarda.dev"},"paul@sarda.dev"),Object(i["e"])(" and tell him he forgot to update the site. ")],-1),o=[h],d={for:"debug_checkbox"},u={key:2},b=Object(i["d"])("p",null,"Select location",-1);function g(e,t,s,h,g,_){const m=Object(i["m"])("Game");return Object(i["h"])(),Object(i["c"])("div",null,[c,this.game_found?(Object(i["h"])(),Object(i["c"])("div",a,[Object(i["d"])("h3",null,"LOCATION #"+Object(i["n"])(this.active_game),1),Object(i["d"])("p",null,Object(i["n"])(e.getGameName().toUpperCase()),1),Object(i["f"])(m,{map:e.getMap(),number:this.active_game,threshold:e.getThreshold(),target:e.getTarget(),debug_mode:this.debug_mode},null,8,["map","number","threshold","target","debug_mode"]),n,l])):(Object(i["h"])(),Object(i["c"])("div",r,o)),Object(i["d"])("div",null,[Object(i["q"])(Object(i["d"])("input",{type:"checkbox",id:"debug_checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.debug_mode=t)},null,512),[[i["o"],e.debug_mode]]),Object(i["d"])("label",d,"Debug Mode: "+Object(i["n"])(e.debug_mode),1)]),e.debug_mode?(Object(i["h"])(),Object(i["c"])("div",u,[b,Object(i["q"])(Object(i["d"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.active_game=t)},null,512),[[i["p"],e.active_game]])])):Object(i["b"])("",!0)])}var _=s("9ab4"),m=s("ce1f");const p=e=>(Object(i["k"])("data-v-e42d9168"),e=e(),Object(i["i"])(),e),O={class:"game"},y=["src"],j=p(()=>Object(i["d"])("br",null,null,-1)),v={class:"buttons"},x={key:0},k={key:1},w={key:0},f=p(()=>Object(i["d"])("h2",null,"YOU WON",-1)),T={key:1},$=p(()=>Object(i["d"])("h2",null,"YOU LOST",-1)),C=p(()=>Object(i["d"])("h3",null,"TRY AGAIN TOMORROW!",-1)),S=[$,C],E=p(()=>Object(i["d"])("br",null,null,-1)),I=p(()=>Object(i["d"])("br",null,null,-1)),M={key:2},P={key:3},U=["src"],N=["src"],B={key:4};function Y(e,t,s,c,a,n){return Object(i["h"])(),Object(i["c"])("div",O,[Object(i["d"])("img",{src:`${e.public_path}images/games/${e.number}/${e.active_pic}.webp`,class:"game_pic"},null,8,y),j,Object(i["d"])("div",v,[Object(i["d"])("div",null,[Object(i["d"])("button",{onClick:t[0]||(t[0]=t=>e.showPic(1)),class:Object(i["g"])(e.getClass(1))},"1",2),Object(i["d"])("button",{onClick:t[1]||(t[1]=t=>e.showPic(2)),class:Object(i["g"])(e.getClass(2))},"2",2),Object(i["d"])("button",{onClick:t[2]||(t[2]=t=>e.showPic(3)),class:Object(i["g"])(e.getClass(3))},"3",2),Object(i["d"])("button",{onClick:t[3]||(t[3]=t=>e.showPic(4)),class:Object(i["g"])(e.getClass(4))},"4",2)])]),"playing"==this.state?(Object(i["h"])(),Object(i["c"])("div",x,[Object(i["d"])("h3",null,Object(i["n"])(e.guessesLeftCount())+" GUESSES LEFT",1)])):(Object(i["h"])(),Object(i["c"])("div",k,["win"==this.state?(Object(i["h"])(),Object(i["c"])("div",w,[f,Object(i["d"])("h3",null,"WITH "+Object(i["n"])(e.guessesLeftCount())+" GUESSES LEFT",1)])):Object(i["b"])("",!0),"lose"==this.state?(Object(i["h"])(),Object(i["c"])("div",T,S)):Object(i["b"])("",!0),Object(i["d"])("h3",null,"NEXT LOCATION IN "+Object(i["n"])(e.countdownUntilTomorrow),1)])),E,Object(i["d"])("canvas",{id:"canvas",onClick:t[4]||(t[4]=(...t)=>e.canvasClick&&e.canvasClick(...t))}),I,"playing"==this.state?(Object(i["h"])(),Object(i["c"])("div",M,[Object(i["d"])("button",{class:Object(i["g"])(null==this.selected_x?"submit disabled":"submit"),onClick:t[5]||(t[5]=(...t)=>e.submitButton&&e.submitButton(...t))}," SUBMIT ",2)])):(Object(i["h"])(),Object(i["c"])("div",P,[Object(i["d"])("button",{onClick:t[6]||(t[6]=(...t)=>e.shareClick&&e.shareClick(...t)),class:"submit"},Object(i["n"])(this.share_text),1)])),Object(i["d"])("img",{id:"map",src:`${e.public_path}maps/${e.map}.webp`,hidden:"true"},null,8,U),Object(i["d"])("img",{id:"target_icon",src:this.public_path+"images/blad_kiryu.webp",hidden:"true"},null,8,N),e.debug_mode?(Object(i["h"])(),Object(i["c"])("div",B,[Object(i["d"])("p",null,"DEBUG X:"+Object(i["n"])(this.click_debug_x),1),Object(i["d"])("p",null,"DEBUG Y:"+Object(i["n"])(this.click_debug_y),1)])):Object(i["b"])("",!0)])}const D=4;let G=class extends m["b"]{};G=Object(_["a"])([Object(m["a"])({props:{map:String,number:Number,target:{x:Number,y:Number},threshold:Number,debug_mode:Boolean},data(){return{active_pic:1,unlocked_pic:1,canvas:null,selected_x:null,selected_y:null,center_x:null,center_y:null,guesses:[],state:"playing",share_text:"SHARE!",image_width:null,image_height:null,click_debug_x:null,click_debug_y:null,canvas_init:!1,public_path:"/kiryueverywhere/",countdownUntilTomorrow:"",countdownUntilTomorrowTimer:null}},mounted(){var e=document.getElementById("canvas");this.canvas=e.getContext("2d"),this.timer=setInterval(()=>{this.draw()},250),this.countdownUntilTomorrowTimer=setInterval(()=>{this.countdownUntilTomorrow=this.countDownUntilNextLocation()},1e3)},beforeDestroy(){clearInterval(this.timer),clearInterval(this.countdownUntilTomorrowTimer)},methods:{countDownUntilNextLocation(){let e=new Date;const t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);t.setTime(t.getTime()+864e5);const s=t.getTime()-e.getTime(),i=Math.floor(s%864e5/36e5),c=Math.floor(s%36e5/6e4),a=Math.floor(s%6e4/1e3);return`${i.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},guessesLeftCount(){return D+1-this.guesses.length},showPic(e){(e<=this.unlocked_pic||"playing"!=this.state)&&(this.active_pic=e)},unlockNext(){this.unlocked_pic+1<=D&&(this.unlocked_pic++,this.active_pic=this.unlocked_pic)},getClass(e){return this.active_pic==e?"game_btn_active":this.unlocked_pic>=e?"game_btn_unlocked":"playing"!=this.state?"game_btn_unlocked_completed":"game_btn_inactive"},posAsPercent(e){return{x:(e.x-this.center_x)/this.image_width*100,y:(e.y-this.center_y)/this.image_height*100}},correctGuess(e){const t=this.posAsPercent({x:e.x,y:e.y}),s=Math.abs(t.x-this.target.x),i=Math.abs(t.y-this.target.y),c=document.getElementById("map");return this.click_debug_x=`px:${t.x} sx:${this.selected_x} cx:${this.center_x} iw:${c.width}`,this.click_debug_y=`py:${t.y} sy:${this.selected_y} cy:${this.center_y} ih:${c.height}`,s<=this.threshold&&i<=this.threshold},shareClick(){let e=`#KIRYU_EVERYWHERE #${this.number}\n\n`;e+="🗺️";for(const s of this.guesses)this.correctGuess(s)?e+=" 🟩":e+=" 🟥";for(let s=0;s<this.guessesLeftCount();s++)e+=" ⬛";e+="\n\n",e+="https://sardap.github.io/kiryueverywhere/",navigator.clipboard.writeText(e),this.share_text="COPPIED!";let t=setInterval(()=>{this.share_text="SHARE!",clearInterval(t)},250)},submitButton(){if(null==this.selected_x||null==this.selected_y)return;const e=this.posAsPercent({x:this.selected_x,y:this.selected_y});console.log(`CLICK ${e.x}% ${e.y}%`);const t=Math.abs(e.x-this.target.x),s=Math.abs(e.y-this.target.y),i=t+s,c=document.getElementById("map");this.click_debug_x=`px:${e.x} sx:${this.selected_x} cx:${this.center_x} iw:${c.width}`,this.click_debug_y=`py:${e.y} sy:${this.selected_y} cy:${this.center_y} ih:${c.height}`,this.correctGuess({x:this.selected_x,y:this.selected_y})?(console.log("win!"),this.state="win"):this.guesses.length+1>=D+1?(console.log("lose!"),this.state="lose"):(console.log("unlock next! "+this.guesses.length),this.unlockNext(),console.log(`failure!: dist_x:${t}, dist_y:${s}, dist:${i} threshold:${this.threshold}`)),this.guesses.push({x:this.selected_x,y:this.selected_y,dist_x:t,dist_y:s}),this.selected_x=null,this.selected_y=null,this.draw()},canvasClick(e){"playing"==this.state&&(this.selected_x=e.offsetX,this.selected_y=e.offsetY,console.log(`target:${this.target.x}, ${this.target.x/100} ${this.target.x/100*this.image_width+this.center_x} ${(this.target.x+this.center_x)*this.image_width/100}`),this.draw())},drawMap(){let e=this.canvas;const t=e.canvas.width,s=e.canvas.height;e.clearRect(0,0,t,s);const i=document.getElementById("map"),c=Math.min(t/i.width,s/i.height);this.image_width=i.width*c,this.image_height=i.height*c;const a=t/2-this.image_width/2,n=s/2-this.image_height/2;this.center_x=t/2,this.center_y=s/2,e.drawImage(i,a,n,this.image_width,this.image_height)},draw(){let e=this.canvas;if(e.clearRect(0,0,e.width,e.height),!this.canvas_init){this.canvas_init=!0;const t=.8*window.innerWidth,s=.5*window.innerHeight;e.canvas.width=t,e.canvas.height=s}this.drawMap();const t=.05*e.canvas.height;for(const s of this.guesses){e.beginPath();let i="";if(s.dist_x<=this.threshold&&s.dist_y<=this.threshold)i="green";else{const e=s.dist_x+s.dist_y;i=e<3.5*this.threshold?"#FF0000":"#8B0000"}e.strokeStyle=i,e.rect(s.x-t/2,s.y-t/2,t,t),e.stroke()}if(this.selected_x&&this.selected_y&&(e.beginPath(),e.strokeStyle="Black",e.rect(this.selected_x-t/2,this.selected_y-t/2,t,t),e.stroke()),"playing"!=this.state){const s=document.getElementById("target_icon"),i=this.target.x/100*this.image_width+this.center_x,c=this.target.y/100*this.image_height+this.center_y;e.beginPath(),e.drawImage(s,i-t/2,c-t/2,t,t),e.stroke()}}}})],G);var R=G,z=(s("3438"),s("6b0d")),A=s.n(z);const L=A()(R,[["render",Y],["__scopeId","data-v-e42d9168"]]);var H=L;const W={1:{map:"yakuza_3_kamuro_map",target:{x:-42,y:-17}},2:{map:"yakuza_kwamai_map",target:{x:16,y:46}},3:{map:"yakuza_0_osaka_map",target:{x:21,y:-29}},4:{map:"yakuza_0_kamuro_map",target:{x:9,y:-1}}},F={yakuza_3_kamuro_map:{threshold:5,game_name:"Yakuza 3"},yakuza_kwamai_map:{threshold:5,game_name:"Yakuza Kiwami"},yakuza_0_kamuro_map:{threshold:5,game_name:"Yakuza 0"},yakuza_0_osaka_map:{threshold:5,game_name:"Yakuza 0"}},K=new Date(2022,6,28,0,0,0);function V(){let e=new Date;const t=864e5,s=e.getTime(),i=K.getTime();return Math.floor(Math.abs((s-i)/t))}let X=class extends m["b"]{};X=Object(_["a"])([Object(m["a"])({components:{Game:H},data(){const e=V();return{debug_mode:!1,active_game:e,game_found:Object.keys(W).length>=e}},methods:{getMap(){return W[this.active_game].map},getTarget(){return W[this.active_game].target},getGameName(){return F[W[this.active_game].map].game_name},getThreshold(){return F[W[this.active_game].map].threshold}}})],X);var q=X;s("e070");const J=A()(q,[["render",g]]);var Q=J;Object(i["a"])(Q).mount("#app")},e070:function(e,t,s){"use strict";s("8ed9")}});
//# sourceMappingURL=app.b236bd7f.js.map