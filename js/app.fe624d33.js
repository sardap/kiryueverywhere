(function(e){function t(t){for(var i,a,o=t[0],l=t[1],r=t[2],u=0,d=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);h&&h(t);while(d.length)d.shift()();return c.push.apply(c,r||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],i=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(i=!1)}i&&(c.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},n={app:0},c=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/kiryueverywhere/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var r=0;r<o.length;r++)t(o[r]);var h=l;c.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"13b8":function(e,t,s){},"429d":function(e,t,s){},"9baf":function(e,t,s){"use strict";s("429d")},b3b5:function(e,t,s){"use strict";s("13b8")},cd49:function(e,t,s){"use strict";s.r(t);var i=s("7a23");const n=Object(i["d"])("h2",null,"🗺️ KIRYU EVERYWHERE! 🗺️",-1),c={key:0},a=Object(i["d"])("h3",null,"THIS HAS NOTHING TO DO WITH SEGA",-1),o=Object(i["d"])("h3",null,[Object(i["e"])("MADE BY "),Object(i["d"])("a",{href:"paul@sarda.dev"},"paul@sarda.dev")],-1),l={key:1},r=Object(i["d"])("h2",{class:"emergency_font"},[Object(i["e"])(" This is bad please email "),Object(i["d"])("a",{href:"paul@sarda.dev"},"paul@sarda.dev"),Object(i["e"])(" and tell him he forgot to update the site. ")],-1),h=[r],u={for:"debug_checkbox"},d={key:2},b=Object(i["d"])("p",null,"Select location",-1),g=Object(i["d"])("br",null,null,-1),_=Object(i["d"])("br",null,null,-1);function m(e,t,s,r,m,p){const O=Object(i["m"])("Game");return Object(i["h"])(),Object(i["c"])("div",null,[n,this.game_found?(Object(i["h"])(),Object(i["c"])("div",c,[Object(i["d"])("h3",null,"LOCATION #"+Object(i["n"])(this.active_game),1),Object(i["d"])("p",null,Object(i["n"])(e.getGameName().toUpperCase()),1),Object(i["f"])(O,{map:e.getMap(),number:this.active_game,threshold:e.getThreshold(),target:e.getTarget(),debug_mode:this.debug_mode},null,8,["map","number","threshold","target","debug_mode"]),a,o])):(Object(i["h"])(),Object(i["c"])("div",l,h)),Object(i["d"])("div",null,[Object(i["q"])(Object(i["d"])("input",{type:"checkbox",id:"debug_checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.debug_mode=t)},null,512),[[i["o"],e.debug_mode]]),Object(i["d"])("label",u,"Debug Mode: "+Object(i["n"])(e.debug_mode),1)]),e.debug_mode?(Object(i["h"])(),Object(i["c"])("div",d,[b,Object(i["q"])(Object(i["d"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.active_game=t)},null,512),[[i["p"],e.active_game]]),g,_,Object(i["d"])("button",{onClick:t[2]||(t[2]=t=>e.resetCookie())},"Reset Cookie"),Object(i["d"])("p",null,"Cookie: "+Object(i["n"])(this.current_cookie),1),Object(i["d"])("button",{onClick:t[3]||(t[3]=t=>e.getCookie())},"Update Gotten Cookie")])):Object(i["b"])("",!0)])}var p=s("9ab4"),O=s("ce1f");const y=e=>(Object(i["k"])("data-v-6c7206ec"),e=e(),Object(i["i"])(),e),j={class:"game"},k=["src"],v=y(()=>Object(i["d"])("br",null,null,-1)),f={class:"buttons"},x={key:0},w={key:1},T={key:0},C=y(()=>Object(i["d"])("h2",null,"YOU WON",-1)),$={key:1},S=y(()=>Object(i["d"])("h2",null,"YOU LOST",-1)),I=y(()=>Object(i["d"])("h3",null,"TRY AGAIN TOMORROW!",-1)),E=[S,I],M=y(()=>Object(i["d"])("br",null,null,-1)),U=y(()=>Object(i["d"])("br",null,null,-1)),N={key:2},P={key:3},B=["src"],D=["src"],G={key:4};function R(e,t,s,n,c,a){return Object(i["h"])(),Object(i["c"])("div",j,[Object(i["d"])("img",{src:`${e.public_path}images/games/${e.number}/${e.active_pic}.webp`,class:"game_pic"},null,8,k),v,Object(i["d"])("div",f,[Object(i["d"])("div",null,[Object(i["d"])("button",{onClick:t[0]||(t[0]=t=>e.showPic(1)),class:Object(i["g"])(e.getClass(1))},"1",2),Object(i["d"])("button",{onClick:t[1]||(t[1]=t=>e.showPic(2)),class:Object(i["g"])(e.getClass(2))},"2",2),Object(i["d"])("button",{onClick:t[2]||(t[2]=t=>e.showPic(3)),class:Object(i["g"])(e.getClass(3))},"3",2),Object(i["d"])("button",{onClick:t[3]||(t[3]=t=>e.showPic(4)),class:Object(i["g"])(e.getClass(4))},"4",2)])]),"playing"==this.state?(Object(i["h"])(),Object(i["c"])("div",x,[Object(i["d"])("h3",null,Object(i["n"])(e.guessesLeftCount())+" GUESSES LEFT",1)])):(Object(i["h"])(),Object(i["c"])("div",w,["win"==this.state?(Object(i["h"])(),Object(i["c"])("div",T,[C,Object(i["d"])("h3",null,"WITH "+Object(i["n"])(e.guessesLeftCount())+" GUESSES LEFT",1)])):Object(i["b"])("",!0),"lose"==this.state?(Object(i["h"])(),Object(i["c"])("div",$,E)):Object(i["b"])("",!0),Object(i["d"])("h3",null,"NEXT LOCATION IN "+Object(i["n"])(e.countdownUntilTomorrow),1)])),M,Object(i["d"])("canvas",{id:"canvas",onClick:t[4]||(t[4]=(...t)=>e.canvasClick&&e.canvasClick(...t))}),U,"playing"==this.state?(Object(i["h"])(),Object(i["c"])("div",N,[Object(i["d"])("button",{class:Object(i["g"])(null==this.selected_x?"submit disabled":"submit"),onClick:t[5]||(t[5]=(...t)=>e.submitButton&&e.submitButton(...t))}," SUBMIT ",2)])):(Object(i["h"])(),Object(i["c"])("div",P,[Object(i["d"])("button",{onClick:t[6]||(t[6]=(...t)=>e.shareClick&&e.shareClick(...t)),class:"submit"},Object(i["n"])(this.share_text),1)])),Object(i["d"])("img",{id:"map",src:`${e.public_path}maps/${e.map}.webp`,hidden:"true"},null,8,B),Object(i["d"])("img",{id:"target_icon",src:this.public_path+"images/blad_kiryu.webp",hidden:"true"},null,8,D),e.debug_mode?(Object(i["h"])(),Object(i["c"])("div",G,[Object(i["d"])("p",null,"DEBUG X:"+Object(i["n"])(this.click_debug_x),1),Object(i["d"])("p",null,"DEBUG Y:"+Object(i["n"])(this.click_debug_y),1)])):Object(i["b"])("",!0)])}function Y(e,t){const s=t+"=",i=decodeURIComponent(e.cookie),n=i.split(";");for(let c=0;c<n.length;c++){let e=n[c];while(" "==e.charAt(0))e=e.substring(1);if(0==e.indexOf(s))return e.substring(s.length,e.length)}return""}function A(e){const t=Y(e,"guesses");if(""==t)return[];const s=JSON.parse(t);return s.guesses}function z(e){e.cookie=""}function L(e,t,s,i){const n=Y(e,"guesses");let c;c=""!=n?JSON.parse(n):{guesses:[]},c.guesses.push({win:t,guess_count:s,location_number:i});const a=new Date;a.setTime(a.getTime()+31536e8);const o="expires="+a.toUTCString();e.cookie="guesses="+JSON.stringify(c)+";"+o}const H=4;let W=class extends O["b"]{};W=Object(p["a"])([Object(O["a"])({props:{map:String,number:Number,target:{x:Number,y:Number},threshold:Number,debug_mode:Boolean},data(){return{active_pic:1,unlocked_pic:1,canvas:null,selected_x:null,selected_y:null,center_x:null,center_y:null,guesses:[],state:"playing",share_text:"SHARE!",image_width:null,image_height:null,click_debug_x:null,click_debug_y:null,canvas_init:!1,public_path:"/kiryueverywhere/",countdownUntilTomorrow:"",countdownUntilTomorrowTimer:null}},mounted(){var e=document.getElementById("canvas");this.canvas=e.getContext("2d"),this.timer=setInterval(()=>{this.draw()},250),this.countdownUntilTomorrowTimer=setInterval(()=>{this.countdownUntilTomorrow=this.countDownUntilNextLocation()},1e3)},beforeDestroy(){clearInterval(this.timer),clearInterval(this.countdownUntilTomorrowTimer)},methods:{countDownUntilNextLocation(){let e=new Date;const t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0);t.setTime(t.getTime()+864e5);const s=t.getTime()-e.getTime(),i=Math.floor(s%864e5/36e5),n=Math.floor(s%36e5/6e4),c=Math.floor(s%6e4/1e3);return`${i.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},guessesLeftCount(){return H+1-this.guesses.length},showPic(e){(e<=this.unlocked_pic||"playing"!=this.state)&&(this.active_pic=e)},unlockNext(){this.unlocked_pic+1<=H&&(this.unlocked_pic++,this.active_pic=this.unlocked_pic)},getClass(e){return this.active_pic==e?"game_btn_active":this.unlocked_pic>=e?"game_btn_unlocked":"playing"!=this.state?"game_btn_unlocked_completed":"game_btn_inactive"},posAsPercent(e){return{x:(e.x-this.center_x)/this.image_width*100,y:(e.y-this.center_y)/this.image_height*100}},correctGuess(e){const t=this.posAsPercent({x:e.x,y:e.y}),s=Math.abs(t.x-this.target.x),i=Math.abs(t.y-this.target.y),n=document.getElementById("map");return this.click_debug_x=`px:${t.x} sx:${this.selected_x} cx:${this.center_x} iw:${n.width}`,this.click_debug_y=`py:${t.y} sy:${this.selected_y} cy:${this.center_y} ih:${n.height}`,s<=this.threshold&&i<=this.threshold},shareClick(){let e=`#KIRYU_EVERYWHERE #${this.number}\n\n`;e+="🗺️";for(const s of this.guesses)this.correctGuess(s)?e+=" 🟩":e+=" 🟥";for(let s=0;s<this.guessesLeftCount();s++)e+=" ⬛";e+="\n\n",e+="https://sardap.github.io/kiryueverywhere/",navigator.clipboard.writeText(e),this.share_text="COPPIED!";let t=setInterval(()=>{this.share_text="SHARE!",clearInterval(t)},250)},submitButton(){if(null==this.selected_x||null==this.selected_y)return;const e=this.posAsPercent({x:this.selected_x,y:this.selected_y});console.log(`CLICK ${e.x}% ${e.y}%`);const t=Math.abs(e.x-this.target.x),s=Math.abs(e.y-this.target.y),i=t+s,n=document.getElementById("map");this.click_debug_x=`px:${e.x} sx:${this.selected_x} cx:${this.center_x} iw:${n.width}`,this.click_debug_y=`py:${e.y} sy:${this.selected_y} cy:${this.center_y} ih:${n.height}`,this.correctGuess({x:this.selected_x,y:this.selected_y})?(console.log("win!"),this.state="win"):this.guesses.length+1>=H+1?(console.log("lose!"),this.state="lose"):(console.log("unlock next! "+this.guesses.length),this.unlockNext(),console.log(`failure!: dist_x:${t}, dist_y:${s}, dist:${i} threshold:${this.threshold}`)),this.guesses.push({x:this.selected_x,y:this.selected_y,dist_x:t,dist_y:s}),"playing"!=this.state&&L(document,"win"==this.state,this.guesses.length,this.number),this.selected_x=null,this.selected_y=null,this.draw()},canvasClick(e){"playing"==this.state&&(this.selected_x=e.offsetX,this.selected_y=e.offsetY,console.log(`target:${this.target.x}, ${this.target.x/100} ${this.target.x/100*this.image_width+this.center_x} ${(this.target.x+this.center_x)*this.image_width/100}`),this.draw())},drawMap(){let e=this.canvas;const t=e.canvas.width,s=e.canvas.height;e.clearRect(0,0,t,s);const i=document.getElementById("map"),n=Math.min(t/i.width,s/i.height);this.image_width=i.width*n,this.image_height=i.height*n;const c=t/2-this.image_width/2,a=s/2-this.image_height/2;this.center_x=t/2,this.center_y=s/2,e.drawImage(i,c,a,this.image_width,this.image_height)},draw(){let e=this.canvas;if(e.clearRect(0,0,e.width,e.height),!this.canvas_init){this.canvas_init=!0;const t=.8*window.innerWidth,s=.5*window.innerHeight;e.canvas.width=t,e.canvas.height=s}this.drawMap();const t=.05*e.canvas.height;for(const s of this.guesses){e.beginPath();let i="";if(s.dist_x<=this.threshold&&s.dist_y<=this.threshold)i="green";else{const e=s.dist_x+s.dist_y;i=e<3.5*this.threshold?"#FF0000":"#8B0000"}e.strokeStyle=i,e.rect(s.x-t/2,s.y-t/2,t,t),e.stroke()}if(this.selected_x&&this.selected_y&&(e.beginPath(),e.strokeStyle="Black",e.rect(this.selected_x-t/2,this.selected_y-t/2,t,t),e.stroke()),"playing"!=this.state){const s=document.getElementById("target_icon"),i=this.target.x/100*this.image_width+this.center_x,n=this.target.y/100*this.image_height+this.center_y;e.beginPath(),e.drawImage(s,i-t/2,n-t/2,t,t),e.stroke()}}}})],W);var F=W,J=(s("b3b5"),s("6b0d")),K=s.n(J);const V=K()(F,[["render",R],["__scopeId","data-v-6c7206ec"]]);var X=V;const q={1:{map:"yakuza_3_kamuro_map",target:{x:-42,y:-17}},2:{map:"yakuza_kwamai_map",target:{x:16,y:46}},3:{map:"yakuza_0_osaka_map",target:{x:21,y:-29}},4:{map:"yakuza_0_kamuro_map",target:{x:9,y:-1}}},Q={yakuza_3_kamuro_map:{threshold:5,game_name:"Yakuza 3"},yakuza_kwamai_map:{threshold:5,game_name:"Yakuza Kiwami"},yakuza_0_kamuro_map:{threshold:5,game_name:"Yakuza 0"},yakuza_0_osaka_map:{threshold:5,game_name:"Yakuza 0"}},Z=new Date(2022,6,28,0,0,0);function ee(){let e=new Date;const t=864e5,s=e.getTime(),i=Z.getTime();return Math.floor(Math.abs((s-i)/t))}let te=class extends O["b"]{};te=Object(p["a"])([Object(O["a"])({components:{Game:X},data(){const e=ee();return{debug_mode:!1,current_cookie:A(document),active_game:e,game_found:Object.keys(q).length>=e}},methods:{resetCookie(){z(document)},getMap(){return q[this.active_game].map},getTarget(){return q[this.active_game].target},getGameName(){return Q[q[this.active_game].map].game_name},getThreshold(){return Q[q[this.active_game].map].threshold}}})],te);var se=te;s("9baf");const ie=K()(se,[["render",m]]);var ne=ie;Object(i["a"])(ne).mount("#app")}});
//# sourceMappingURL=app.fe624d33.js.map