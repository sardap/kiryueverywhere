(function(e){function t(t){for(var c,a,r=t[0],o=t[1],l=t[2],h=0,d=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(e[c]=o[c]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],c=!0,r=1;r<s.length;r++){var o=s[r];0!==i[o]&&(c=!1)}c&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var c={},i={app:0},n=[];function a(t){if(c[t])return c[t].exports;var s=c[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=c,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(s,c,function(t){return e[t]}.bind(null,c));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/kiryueverywhere/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"19cc":function(e,t,s){e.exports=s.p+"img/yakuza_kwamai_2_map.7dec2308.webp"},"1d37":function(e,t,s){},"37ba":function(e,t,s){e.exports=s.p+"img/yakuza_3_rykyu_map.9509c83a.webp"},"41b2":function(e,t,s){e.exports=s.p+"img/4.10f3b563.webp"},"480f":function(e,t,s){e.exports=s.p+"img/yakuza_3_kamuro_map.f63bf065.webp"},4950:function(e,t,s){"use strict";s("1d37")},"4b58":function(e,t,s){e.exports=s.p+"img/yakuza_0_osaka_map.6cc96ccc.webp"},"54e2":function(e,t,s){},6806:function(e,t,s){e.exports=s.p+"img/1.836f92f2.webp"},"79f0":function(e,t,s){e.exports=s.p+"img/2.af4b30ab.webp"},"7d0b":function(e,t,s){var c={"./1/1.webp":"6806","./1/2.webp":"79f0","./1/3.webp":"afe1","./1/4.webp":"f371","./2/1.webp":"c27c","./2/2.webp":"f289","./2/3.webp":"eaca","./2/4.webp":"41b2","./2/root.webp":"9e9b"};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}i.keys=function(){return Object.keys(c)},i.resolve=n,e.exports=i,i.id="7d0b"},"85c8":function(e,t,s){var c={"./yakuza_0_kamuro_map.webp":"dd61","./yakuza_0_osaka_map.webp":"4b58","./yakuza_3_kamuro_map.webp":"480f","./yakuza_3_rykyu_map.webp":"37ba","./yakuza_kwamai_2_map.webp":"19cc","./yakuza_kwamai_map.webp":"c583"};function i(e){var t=n(e);return s(t)}function n(e){if(!s.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}i.keys=function(){return Object.keys(c)},i.resolve=n,e.exports=i,i.id="85c8"},"9e9b":function(e,t,s){e.exports=s.p+"img/root.40c40f06.webp"},afe1:function(e,t,s){e.exports=s.p+"img/3.e05449d5.webp"},c27c:function(e,t,s){e.exports=s.p+"img/1.cc0c8eef.webp"},c583:function(e,t,s){e.exports=s.p+"img/yakuza_kwamai_map.e4b2e34c.webp"},cd49:function(e,t,s){"use strict";s.r(t);var c=s("7a23");const i=Object(c["d"])("h2",null,"üó∫Ô∏è KIRYU EVERYWHERE! üó∫Ô∏è",-1);function n(e,t,s,n,a,r){const o=Object(c["l"])("Game");return Object(c["g"])(),Object(c["c"])("div",null,[i,Object(c["d"])("h3",null,"LOCATION #"+Object(c["m"])(this.active_game),1),Object(c["e"])(o,{map:e.getMap(),number:this.active_game,threshold:e.getThreshold(),target:e.getTarget()},null,8,["map","number","threshold","target"])])}var a=s("9ab4"),r=s("ce1f");const o=e=>(Object(c["j"])("data-v-4a933d08"),e=e(),Object(c["h"])(),e),l={class:"game"},u=["src"],h=o(()=>Object(c["d"])("br",null,null,-1)),d={class:"buttons"},b={key:0},p={key:1},_=o(()=>Object(c["d"])("h2",null,"YOU WON",-1)),g={key:2},m=o(()=>Object(c["d"])("h2",null,"YOU LOST",-1)),f=o(()=>Object(c["d"])("h3",null,"TRY AGAIN TOMORROW!",-1)),y=[m,f],O=o(()=>Object(c["d"])("br",null,null,-1)),w=o(()=>Object(c["d"])("br",null,null,-1)),v={key:3},k={key:4},j=["src"];function x(e,t,i,n,a,r){return Object(c["g"])(),Object(c["c"])("div",l,[Object(c["d"])("img",{src:s("7d0b")(`./${e.number}/${e.active_pic}.webp`),class:"game_pic"},null,8,u),h,Object(c["d"])("div",d,[Object(c["d"])("div",null,[Object(c["d"])("button",{onClick:t[0]||(t[0]=t=>e.showPic(1)),class:Object(c["f"])(e.getClass(1))},"1",2),Object(c["d"])("button",{onClick:t[1]||(t[1]=t=>e.showPic(2)),class:Object(c["f"])(e.getClass(2))},"2",2),Object(c["d"])("button",{onClick:t[2]||(t[2]=t=>e.showPic(3)),class:Object(c["f"])(e.getClass(3))},"3",2),Object(c["d"])("button",{onClick:t[3]||(t[3]=t=>e.showPic(4)),class:Object(c["f"])(e.getClass(4))},"4",2)])]),"playing"==this.state?(Object(c["g"])(),Object(c["c"])("div",b,[Object(c["d"])("h3",null,Object(c["m"])(e.guessesLeftCount())+" GUESSES LEFT",1)])):Object(c["b"])("",!0),"win"==this.state?(Object(c["g"])(),Object(c["c"])("div",p,[_,Object(c["d"])("h3",null,"WITH "+Object(c["m"])(e.guessesLeftCount())+" GUESSES LEFT",1)])):Object(c["b"])("",!0),"lose"==this.state?(Object(c["g"])(),Object(c["c"])("div",g,y)):Object(c["b"])("",!0),O,Object(c["d"])("canvas",{id:"canvas",onClick:t[4]||(t[4]=(...t)=>e.canvasClick&&e.canvasClick(...t))}),w,"playing"==this.state?(Object(c["g"])(),Object(c["c"])("div",v,[Object(c["d"])("button",{class:Object(c["f"])(null==this.selected_x?"submit disabled":"submit"),onClick:t[5]||(t[5]=(...t)=>e.submitButton&&e.submitButton(...t))}," SUBMIT ",2)])):(Object(c["g"])(),Object(c["c"])("div",k,[Object(c["d"])("button",{onClick:t[6]||(t[6]=(...t)=>e.shareClick&&e.shareClick(...t)),class:"submit"},Object(c["m"])(this.share_text),1)])),Object(c["d"])("img",{id:"map",src:s("85c8")(`./${e.map}.webp`),hidden:"true"},null,8,j),Object(c["d"])("div",null,[Object(c["d"])("p",null,"DEBUG X:"+Object(c["m"])(this.click_debug_x),1),Object(c["d"])("p",null,"DEBUG Y:"+Object(c["m"])(this.click_debug_y),1)])])}const C=4;let E=class extends r["b"]{};E=Object(a["a"])([Object(r["a"])({props:{map:String,number:Number,target:{x:Number,y:Number},threshold:Number},data(){return{active_pic:1,unlocked_pic:1,canvas:null,selected_x:null,selected_y:null,center_x:null,center_y:null,guesses:[],state:"playing",share_text:"SHARE!",image_width:null,image_height:null,click_debug_x:null,click_debug_y:null,canvas_init:!1}},mounted(){var e=document.getElementById("canvas");this.canvas=e.getContext("2d"),this.timer=setInterval(()=>{this.draw()},250)},beforeDestroy(){clearInterval(this.timer)},methods:{guessesLeftCount(){return C+1-this.guesses.length},showPic(e){(e<=this.unlocked_pic||"playing"!=this.state)&&(this.active_pic=e)},unlockNext(){this.unlocked_pic+1<=C&&(this.unlocked_pic++,this.active_pic=this.unlocked_pic)},getClass(e){return this.active_pic==e?"game_btn_active":this.unlocked_pic>=e?"game_btn_unlocked":"playing"!=this.state?"game_btn_unlocked_completed":"game_btn_inactive"},posAsPercent(e){document.getElementById("map");return{x:(e.x-this.center_x)/this.image_width*100,y:(e.y-this.center_y)/this.image_height*100}},shareClick(){let e=`#KIRYU_EVERYWHERE #${this.number}\n\n`;e+="üó∫Ô∏è";for(let s=0;s<this.unlocked_pic-1;s++)e+=" üü•";e+=" üü©";for(let s=0;s<C-this.unlocked_pic;s++)e+=" ‚¨õ";e+="\n\n",e+="https://kiryueverywhere.github.io",navigator.clipboard.writeText(e),this.share_text="COPPIED!";let t=setInterval(()=>{this.share_text="SHARE!",clearInterval(t)},250)},submitButton(){if(null==this.selected_x||null==this.selected_y)return;const e=this.posAsPercent({x:this.selected_x,y:this.selected_y});console.log(`CLICK ${e.x}% ${e.y}%`);const t=Math.abs(e.x-this.target.x),s=Math.abs(e.y-this.target.y),c=t+s,i=document.getElementById("map");this.click_debug_x=`px:${e.x} sx:${this.selected_x} cx:${this.center_x} iw:${i.width}`,this.click_debug_y=`py:${e.y} sy:${this.selected_y} cy:${this.center_y} ih:${i.height}`,t<=this.threshold&&s<=this.threshold?(console.log("win!"),this.state="win"):this.guesses.length+1>=C+1?(console.log("lose!"),this.state="lose"):(console.log("unlock next! "+this.guesses.length),this.unlockNext(),console.log(`failure!: dist_x:${t}, dist_y:${s}, dist:${c} threshold:${this.threshold}`)),this.guesses.push({x:this.selected_x,y:this.selected_y,dist_x:t,dist_y:s}),this.selected_x=null,this.selected_y=null,this.draw()},canvasClick(e){"playing"==this.state&&(this.selected_x=e.offsetX,this.selected_y=e.offsetY,this.draw())},drawMap(){let e=this.canvas;const t=e.canvas.width,s=e.canvas.height,c=document.getElementById("map"),i=Math.min(t/c.width,s/c.height);this.image_width=c.width*i,this.image_height=c.height*i;const n=t/2-this.image_width/2,a=s/2-this.image_height/2;this.center_x=t/2,this.center_y=s/2,e.drawImage(c,n,a,this.image_width,this.image_height)},draw(){let e=this.canvas;if(e.clearRect(0,0,e.width,e.height),!this.canvas_init){this.canvas_init=!0;const t=.8*window.innerWidth,s=.5*window.innerHeight;e.canvas.width=t,e.canvas.height=s}this.drawMap();const t=.05*e.canvas.height;for(const s of this.guesses){e.beginPath();let c="";if(s.dist_x<=this.threshold&&s.dist_y<=this.threshold)c="green";else{const e=s.dist_x+s.dist_y;c=e<3.5*this.threshold?"#FF0000":"#8B0000"}e.strokeStyle=c,e.rect(s.x-t/2,s.y-t/2,t,t),e.stroke()}this.selected_x&&this.selected_y&&(e.beginPath(),e.strokeStyle="Black",e.rect(this.selected_x-t/2,this.selected_y-t/2,t,t),e.stroke())}}})],E);var T=E,I=(s("4950"),s("6b0d")),P=s.n(I);const S=P()(T,[["render",x],["__scopeId","data-v-4a933d08"]]);var $=S;const M={yakuza_3_kamuro_map:{threshold:5}},z={1:{map:"yakuza_3_kamuro_map",target:{x:-42,y:-17}},2:{map:"yakuza_3_kamuro_map",target:{x:-.08586762075134168,y:-.034048257372654156}}},N=new Date("2022-07-28");function U(){let e=new Date;const t=e.getTime(),s=N.getTime();return Math.round((t-s)/864e5)}let B=class extends r["b"]{};B=Object(a["a"])([Object(r["a"])({components:{Game:$},data(){return{active_game:U()}},methods:{getMap(){return console.log(this.active_game),z[this.active_game].map},getTarget(){return console.log(this.active_game),z[this.active_game].target},getThreshold(){return console.log(this.active_game),M[z[this.active_game].map].threshold}}})],B);var R=B;s("fccd");const D=P()(R,[["render",n]]);var L=D;Object(c["a"])(L).mount("#app")},dd61:function(e,t,s){e.exports=s.p+"img/yakuza_0_kamuro_map.217f663d.webp"},eaca:function(e,t,s){e.exports=s.p+"img/3.22fb85dc.webp"},f289:function(e,t,s){e.exports=s.p+"img/2.6e8e5a90.webp"},f371:function(e,t,s){e.exports=s.p+"img/4.0819dfb5.webp"},fccd:function(e,t,s){"use strict";s("54e2")}});
//# sourceMappingURL=app.8592064f.js.map