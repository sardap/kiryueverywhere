(function(t){function e(e){for(var i,c,r=e[0],l=e[1],h=e[2],u=0,d=[];u<r.length;u++)c=r[u],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);o&&o(e);while(d.length)d.shift()();return n.push.apply(n,h||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,r=1;r<s.length;r++){var l=s[r];0!==a[l]&&(i=!1)}i&&(n.splice(e--,1),t=c(c.s=s[0]))}return t}var i={},a={app:0},n=[];function c(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=i,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(s,i,function(e){return t[e]}.bind(null,i));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/kiryueverywhere/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var o=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"01dd":function(t,e,s){},"5f17":function(t,e,s){},"7efb":function(t,e,s){"use strict";s("5f17")},a96b:function(t,e,s){"use strict";s("01dd")},cd49:function(t,e,s){"use strict";s.r(e);var i=s("7a23");const a=Object(i["d"])("h2",null,"🗺️ KIRYU EVERYWHERE! 🗺️",-1),n={key:0},c=Object(i["d"])("h3",null,"THIS HAS NOTHING TO DO WITH SEGA",-1),r=Object(i["d"])("h3",null,[Object(i["e"])("MADE BY "),Object(i["d"])("a",{href:"paul@sarda.dev"},"paul@sarda.dev")],-1),l={key:1},h=Object(i["d"])("h2",{class:"emergency_font"},[Object(i["e"])(" This is bad please email "),Object(i["d"])("a",{href:"paul@sarda.dev"},"paul@sarda.dev"),Object(i["e"])(" and tell him he forgot to update the site. ")],-1),o=[h];function u(t,e,s,h,u,d){const g=Object(i["m"])("Game");return Object(i["h"])(),Object(i["c"])("div",null,[a,this.game_found?(Object(i["h"])(),Object(i["c"])("div",n,[Object(i["d"])("h3",null,"LOCATION #"+Object(i["n"])(this.active_game),1),Object(i["d"])("p",null,Object(i["n"])(t.getGameName().toUpperCase()),1),Object(i["f"])(g,{map:t.getMap(),number:this.active_game,threshold:t.getThreshold(),target:t.getTarget()},null,8,["map","number","threshold","target"]),c,r])):(Object(i["h"])(),Object(i["c"])("div",l,o))])}var d=s("9ab4"),g=s("ce1f");const b=t=>(Object(i["k"])("data-v-cb26639a"),t=t(),Object(i["i"])(),t),_={class:"game"},m=["src"],p=b(()=>Object(i["d"])("br",null,null,-1)),y={class:"buttons"},O={key:0},j={key:1},v={key:0},f=b(()=>Object(i["d"])("h2",null,"YOU WON",-1)),x={key:1},w=b(()=>Object(i["d"])("h2",null,"YOU LOST",-1)),k=b(()=>Object(i["d"])("h3",null,"TRY AGAIN TOMORROW!",-1)),T=[w,k],$=b(()=>Object(i["d"])("br",null,null,-1)),C=b(()=>Object(i["d"])("br",null,null,-1)),E={key:2},I={key:3},S=["src"],M=["src"];function P(t,e,s,a,n,c){return Object(i["h"])(),Object(i["c"])("div",_,[Object(i["d"])("img",{src:`${t.public_path}images/games/${t.number}/${t.active_pic}.webp`,class:"game_pic"},null,8,m),p,Object(i["d"])("div",y,[Object(i["d"])("div",null,[Object(i["d"])("button",{onClick:e[0]||(e[0]=e=>t.showPic(1)),class:Object(i["g"])(t.getClass(1))},"1",2),Object(i["d"])("button",{onClick:e[1]||(e[1]=e=>t.showPic(2)),class:Object(i["g"])(t.getClass(2))},"2",2),Object(i["d"])("button",{onClick:e[2]||(e[2]=e=>t.showPic(3)),class:Object(i["g"])(t.getClass(3))},"3",2),Object(i["d"])("button",{onClick:e[3]||(e[3]=e=>t.showPic(4)),class:Object(i["g"])(t.getClass(4))},"4",2)])]),"playing"==this.state?(Object(i["h"])(),Object(i["c"])("div",O,[Object(i["d"])("h3",null,Object(i["n"])(t.guessesLeftCount())+" GUESSES LEFT",1)])):(Object(i["h"])(),Object(i["c"])("div",j,["win"==this.state?(Object(i["h"])(),Object(i["c"])("div",v,[f,Object(i["d"])("h3",null,"WITH "+Object(i["n"])(t.guessesLeftCount())+" GUESSES LEFT",1)])):Object(i["b"])("",!0),"lose"==this.state?(Object(i["h"])(),Object(i["c"])("div",x,T)):Object(i["b"])("",!0),Object(i["d"])("h3",null,"NEXT LOCATION IN "+Object(i["n"])(t.countdownUntilTomorrow),1)])),$,Object(i["d"])("canvas",{id:"canvas",onClick:e[4]||(e[4]=(...e)=>t.canvasClick&&t.canvasClick(...e))}),C,"playing"==this.state?(Object(i["h"])(),Object(i["c"])("div",E,[Object(i["d"])("button",{class:Object(i["g"])(null==this.selected_x?"submit disabled":"submit"),onClick:e[5]||(e[5]=(...e)=>t.submitButton&&t.submitButton(...e))}," SUBMIT ",2)])):(Object(i["h"])(),Object(i["c"])("div",I,[Object(i["d"])("button",{onClick:e[6]||(e[6]=(...e)=>t.shareClick&&t.shareClick(...e)),class:"submit"},Object(i["n"])(this.share_text),1)])),Object(i["d"])("img",{id:"map",src:`${t.public_path}maps/${t.map}.webp`,hidden:"true"},null,8,S),Object(i["d"])("img",{id:"target_icon",src:this.public_path+"images/blad_kiryu.webp",hidden:"true"},null,8,M),Object(i["d"])("div",null,[Object(i["d"])("p",null,"DEBUG X:"+Object(i["n"])(this.click_debug_x),1),Object(i["d"])("p",null,"DEBUG Y:"+Object(i["n"])(this.click_debug_y),1)])])}const N=4;let U=class extends g["b"]{};U=Object(d["a"])([Object(g["a"])({props:{map:String,number:Number,target:{x:Number,y:Number},threshold:Number},data(){return{active_pic:1,unlocked_pic:1,canvas:null,selected_x:null,selected_y:null,center_x:null,center_y:null,guesses:[],state:"playing",share_text:"SHARE!",image_width:null,image_height:null,click_debug_x:null,click_debug_y:null,canvas_init:!1,public_path:"/kiryueverywhere/",countdownUntilTomorrow:"",countdownUntilTomorrowTimer:null}},mounted(){var t=document.getElementById("canvas");this.canvas=t.getContext("2d"),this.timer=setInterval(()=>{this.draw()},250),this.countdownUntilTomorrowTimer=setInterval(()=>{this.countdownUntilTomorrow=this.countDownUntilNextLocation()},1e3)},beforeDestroy(){clearInterval(this.timer),clearInterval(this.countdownUntilTomorrowTimer)},methods:{countDownUntilNextLocation(){let t=new Date;const e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);e.setTime(e.getTime()+864e5);const s=e.getTime()-t.getTime(),i=Math.floor(s%864e5/36e5),a=Math.floor(s%36e5/6e4),n=Math.floor(s%6e4/1e3);return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},guessesLeftCount(){return N+1-this.guesses.length},showPic(t){(t<=this.unlocked_pic||"playing"!=this.state)&&(this.active_pic=t)},unlockNext(){this.unlocked_pic+1<=N&&(this.unlocked_pic++,this.active_pic=this.unlocked_pic)},getClass(t){return this.active_pic==t?"game_btn_active":this.unlocked_pic>=t?"game_btn_unlocked":"playing"!=this.state?"game_btn_unlocked_completed":"game_btn_inactive"},posAsPercent(t){return{x:(t.x-this.center_x)/this.image_width*100,y:(t.y-this.center_y)/this.image_height*100}},correctGuess(t){const e=this.posAsPercent({x:t.x,y:t.y}),s=Math.abs(e.x-this.target.x),i=Math.abs(e.y-this.target.y),a=document.getElementById("map");return this.click_debug_x=`px:${e.x} sx:${this.selected_x} cx:${this.center_x} iw:${a.width}`,this.click_debug_y=`py:${e.y} sy:${this.selected_y} cy:${this.center_y} ih:${a.height}`,s<=this.threshold&&i<=this.threshold},shareClick(){let t=`#KIRYU_EVERYWHERE #${this.number}\n\n`;t+="🗺️";for(const s of this.guesses)this.correctGuess(s)?t+=" 🟩":t+=" 🟥";for(let s=0;s<this.guessesLeftCount();s++)t+=" ⬛";t+="\n\n",t+="https://sardap.github.io/kiryueverywhere/",navigator.clipboard.writeText(t),this.share_text="COPPIED!";let e=setInterval(()=>{this.share_text="SHARE!",clearInterval(e)},250)},submitButton(){if(null==this.selected_x||null==this.selected_y)return;const t=this.posAsPercent({x:this.selected_x,y:this.selected_y});console.log(`CLICK ${t.x}% ${t.y}%`);const e=Math.abs(t.x-this.target.x),s=Math.abs(t.y-this.target.y),i=e+s,a=document.getElementById("map");this.click_debug_x=`px:${t.x} sx:${this.selected_x} cx:${this.center_x} iw:${a.width}`,this.click_debug_y=`py:${t.y} sy:${this.selected_y} cy:${this.center_y} ih:${a.height}`,this.correctGuess({x:this.selected_x,y:this.selected_y})?(console.log("win!"),this.state="win"):this.guesses.length+1>=N+1?(console.log("lose!"),this.state="lose"):(console.log("unlock next! "+this.guesses.length),this.unlockNext(),console.log(`failure!: dist_x:${e}, dist_y:${s}, dist:${i} threshold:${this.threshold}`)),this.guesses.push({x:this.selected_x,y:this.selected_y,dist_x:e,dist_y:s}),this.selected_x=null,this.selected_y=null,this.draw()},canvasClick(t){"playing"==this.state&&(this.selected_x=t.offsetX,this.selected_y=t.offsetY,console.log(`target:${this.target.x}, ${this.target.x/100} ${this.target.x/100*this.image_width+this.center_x} ${(this.target.x+this.center_x)*this.image_width/100}`),this.draw())},drawMap(){let t=this.canvas;const e=t.canvas.width,s=t.canvas.height,i=document.getElementById("map"),a=Math.min(e/i.width,s/i.height);this.image_width=i.width*a,this.image_height=i.height*a;const n=e/2-this.image_width/2,c=s/2-this.image_height/2;this.center_x=e/2,this.center_y=s/2,t.drawImage(i,n,c,this.image_width,this.image_height)},draw(){let t=this.canvas;if(t.clearRect(0,0,t.width,t.height),!this.canvas_init){this.canvas_init=!0;const e=.8*window.innerWidth,s=.5*window.innerHeight;t.canvas.width=e,t.canvas.height=s}this.drawMap();const e=.05*t.canvas.height;for(const s of this.guesses){t.beginPath();let i="";if(s.dist_x<=this.threshold&&s.dist_y<=this.threshold)i="green";else{const t=s.dist_x+s.dist_y;i=t<3.5*this.threshold?"#FF0000":"#8B0000"}t.strokeStyle=i,t.rect(s.x-e/2,s.y-e/2,e,e),t.stroke()}if(this.selected_x&&this.selected_y&&(t.beginPath(),t.strokeStyle="Black",t.rect(this.selected_x-e/2,this.selected_y-e/2,e,e),t.stroke()),"playing"!=this.state){const s=document.getElementById("target_icon"),i=this.target.x/100*this.image_width+this.center_x,a=this.target.y/100*this.image_height+this.center_y;t.beginPath(),t.drawImage(s,i-e/2,a-e/2,e,e),t.stroke()}}}})],U);var Y=U,B=(s("7efb"),s("6b0d")),G=s.n(B);const D=G()(Y,[["render",P],["__scopeId","data-v-cb26639a"]]);var A=D;const L=new Date(2022,6,28,0,0,0),R={yakuza_3_kamuro_map:{threshold:5,game_name:"Yakuza 3"},yakuza_kwamai_map:{threshold:5,game_name:"Yakuza Kiwami"},yakuza_0_kamuro_map:{threshold:5,game_name:"Yakuza 0"},yakuza_0_osaka_map:{threshold:5,game_name:"Yakuza 0"}},z={1:{map:"yakuza_3_kamuro_map",target:{x:-42,y:-17}},2:{map:"yakuza_kwamai_map",target:{x:16,y:46}},3:{map:"yakuza_0_osaka_map",target:{x:21,y:-29}}};function H(){let t=new Date;const e=864e5,s=t.getTime(),i=L.getTime();return Math.floor(Math.abs((s-i)/e))}let W=class extends g["b"]{};W=Object(d["a"])([Object(g["a"])({components:{Game:A},data(){const t=H();return{active_game:t,game_found:Object.keys(z).length>=t}},methods:{getMap(){return z[this.active_game].map},getTarget(){return z[this.active_game].target},getGameName(){return R[z[this.active_game].map].game_name},getThreshold(){return R[z[this.active_game].map].threshold}}})],W);var F=W;s("a96b");const K=G()(F,[["render",u]]);var X=K;Object(i["a"])(X).mount("#app")}});
//# sourceMappingURL=app.d540d102.js.map